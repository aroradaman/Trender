<html>

<head>

<script src="jquery.min.js">
</script>
<script>
	function playMP3(id) {
	
		var fetchUrl = '/playId?id='+id;
			$.ajax({url: fetchUrl ,success:function(result){

				$('#playBox').empty();				
	
			$('#playBox').append(result);

				results();
				}
		});

		window.location = "http://127.0.0.1:5000/player?id=" + id;

	}

	function safe(getVar) {
		return(encodeURIComponent(getVar));
	}
	$(document).ready(function(){
		
		$("input").keyup(function(){
		
	results();
	
			});
		
});

	function results() {
			//alert('testing purpose only');
	
		var fetchUrl = "fetchRecord?title=" + safe(document.getElementById('title').value) + '&artist=' + safe(document.getElementById('artist').value) + '&album='+ safe(document.getElementById('album').value) + '&genre='+ safe(document.getElementById('genre').value) + '&year=' + safe(document.getElementById('year').value);
		
			$.ajax({url: fetchUrl ,success:function(result){

				$('#result').empty();
	
			$('#result').append(result);

				}
			});
	
	}


	$( document ).on( 'click', '#playButton', function () {
		playMP3($(this).data('value'));	    
	} );

</script>

</head>

<body>
<input type='text' name='title' id='title'>

<input type='text' name='artist' id ='artist'>

<input type='text' name='album' id ='album'>

<input type='text' name='genre' id ='genre'>

<input type='year' name='year' id ='year'>

<div id="playBox" name ="playBox">
</div>
<br>

<div id='result' name='result'>
 . . . . . . . . . . . . . <br>

</div>

</body>

</html>
